<div class="stripe-config-container">
  <h1>⚙️ Configuration Stripe</h1>

  <div class="config-card" *ngIf="!isLoading">
    <div class="form-group">
      <label>Environnement</label>
      <select [(ngModel)]="config.environment" class="form-control">
        <option value="test">🧪 Test</option>
        <option value="live">🚀 Production</option>
      </select>
    </div>

    <div class="form-section">
      <h3>🔑 Clés API Stripe</h3>

      <div class="form-group">
        <label>Clé Publique (pk_...)</label>
        <input
          type="text"
          [(ngModel)]="config.stripe_public_key"
          class="form-control"
          placeholder="pk_live_... ou pk_test_...">
      </div>

      <div class="form-group">
        <label>Clé Secrète (sk_...)</label>
        <input
          type="password"
          [(ngModel)]="config.stripe_secret_key"
          class="form-control"
          placeholder="sk_live_... ou sk_test_...">
      </div>

      <div class="form-group">
        <label>Webhook Secret (whsec_...)</label>
        <input
          type="text"
          [(ngModel)]="config.stripe_webhook_secret"
          class="form-control"
          placeholder="whsec_...">
      </div>

      <button
        (click)="testConnection()"
        [disabled]="isTesting"
        class="btn-test">
        {{ isTesting ? 'Test en cours...' : '🧪 Tester Connexion' }}
      </button>
    </div>

    <div class="form-section">
      <h3>💰 Plans & Prix</h3>

      <div class="plan-row">
        <div class="form-group">
          <label>Price ID Mensuel</label>
          <input
            type="text"
            [(ngModel)]="config.price_id_monthly"
            class="form-control"
            placeholder="price_...">
        </div>
        <div class="form-group">
          <label>Montant (€)</label>
          <input
            type="number"
            [(ngModel)]="config.amount_monthly"
            class="form-control"
            step="0.01">
        </div>
      </div>

      <div class="plan-row">
        <div class="form-group">
          <label>Price ID Trimestriel</label>
          <input
            type="text"
            [(ngModel)]="config.price_id_quarterly"
            class="form-control"
            placeholder="price_...">
        </div>
        <div class="form-group">
          <label>Montant (€)</label>
          <input
            type="number"
            [(ngModel)]="config.amount_quarterly"
            class="form-control"
            step="0.01">
        </div>
      </div>

      <div class="plan-row">
        <div class="form-group">
          <label>Price ID Annuel</label>
          <input
            type="text"
            [(ngModel)]="config.price_id_annual"
            class="form-control"
            placeholder="price_...">
        </div>
        <div class="form-group">
          <label>Montant (€)</label>
          <input
            type="number"
            [(ngModel)]="config.amount_annual"
            class="form-control"
            step="0.01">
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>Notes</label>
      <textarea
        [(ngModel)]="config.notes"
        class="form-control"
        rows="3"
        placeholder="Notes de configuration..."></textarea>
    </div>

    <div class="actions">
      <button
        (click)="saveConfig()"
        [disabled]="isSaving"
        class="btn-save">
        {{ isSaving ? 'Sauvegarde...' : '💾 Sauvegarder' }}
      </button>
    </div>
  </div>

  <div *ngIf="isLoading" class="loading">
    Chargement...
  </div>
</div>
