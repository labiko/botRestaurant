<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Gestion des Cat√©gories</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="onCancel()">
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="category-management-content">
  
  <!-- Section Nouvelle Cat√©gorie masqu√©e temporairement
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="add-circle" color="primary"></ion-icon>
        Nouvelle Cat√©gorie
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <form [formGroup]="categoryForm" (ngSubmit)="onAddCategory()">
        <ion-item>
          <ion-label position="stacked">Nom de la cat√©gorie *</ion-label>
          <ion-input formControlName="name" placeholder="Ex: WRAPS"></ion-input>
        </ion-item>
        
        <ion-item>
          <ion-label position="stacked">Ic√¥ne</ion-label>
          <ion-input formControlName="icon" placeholder="Ex: üåØ"></ion-input>
        </ion-item>
        
        <ion-item>
          <ion-label position="stacked">Ordre d'affichage</ion-label>
          <ion-input formControlName="display_order" type="number" placeholder="25"></ion-input>
        </ion-item>
        
        <ion-item>
          <ion-label>Active</ion-label>
          <ion-toggle formControlName="is_active" color="primary"></ion-toggle>
        </ion-item>
        
        <div style="margin-top: 16px;">
          <ion-button 
            type="submit" 
            expand="block" 
            color="primary"
            [disabled]="categoryForm.invalid || isLoading">
            <ion-icon name="add" slot="start"></ion-icon>
            Ajouter la cat√©gorie
          </ion-button>
        </div>
      </form>
    </ion-card-content>
  </ion-card>
  -->

  <!-- Categories List -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="list" color="primary"></ion-icon>
        Cat√©gories Existantes ({{ categories.length }})
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      
      <div *ngFor="let category of categories; trackBy: trackByCategory" class="category-item">
        <ion-item>
          <div slot="start" class="category-info">
            <span class="category-icon">{{ category.icon || 'üìÅ' }}</span>
            <div class="category-details">
              <h3>{{ category.name }}</h3>
              <p>Ordre: {{ category.display_order }}</p>
            </div>
          </div>
          
          <ion-chip 
            slot="end" 
            [color]="category.is_active ? 'success' : 'danger'"
            style="margin-right: 8px;">
            {{ category.is_active ? 'Actif' : 'Inactif' }}
          </ion-chip>
          
          <ion-button 
            fill="clear" 
            color="primary"
            (click)="onEditCategory(category)"
            slot="end">
            <ion-icon name="pencil" slot="icon-only"></ion-icon>
          </ion-button>
          
          <ion-button 
            fill="clear" 
            [color]="category.is_active ? 'danger' : 'success'"
            (click)="onToggleCategoryStatus(category)"
            slot="end">
            {{ category.is_active ? 'D√âSACTIVER' : 'ACTIVER' }}
          </ion-button>
        </ion-item>
      </div>

      <!-- Empty State -->
      <div *ngIf="categories.length === 0 && !isLoading" class="empty-categories">
        <ion-icon name="folder-open" color="medium" size="large"></ion-icon>
        <h3>Aucune cat√©gorie</h3>
        <p>Les cat√©gories s'afficheront ici</p>
      </div>
      
      <!-- Loading -->
      <div *ngIf="isLoading" class="loading-state">
        <ion-spinner></ion-spinner>
        <p>Chargement...</p>
      </div>
      
    </ion-card-content>
  </ion-card>

</ion-content>

<ion-footer>
  <ion-toolbar>
    <div style="padding: 16px;">
      <ion-button expand="block" color="primary" fill="outline" (click)="onCancel()">
        Fermer
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>