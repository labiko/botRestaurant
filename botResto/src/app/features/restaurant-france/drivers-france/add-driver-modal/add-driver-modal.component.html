<!-- FORMULAIRE COMPLET AVEC HTML STANDARD -->
<div style="width: 100%; height: 100%; background: #f8f9fa; padding: 0; display: flex; flex-direction: column;">
  
  <!-- En-tête -->
  <div style="background: #6c5ce7; color: white; padding: 15px; text-align: center; font-weight: bold; font-size: 18px;">
    <span style="position: absolute; left: 15px; cursor: pointer; font-size: 22px;" (click)="dismiss()">✕</span>
    👤 Nouveau Livreur
  </div>

  <!-- Message d'erreur si formulaire non initialisé -->
  <div *ngIf="!driverForm" style="padding: 40px; text-align: center;">
    <div style="background: #ff6b6b; color: white; padding: 20px; border-radius: 12px;">
      <h3>❌ Erreur d'initialisation</h3>
      <p>Le formulaire ne s'est pas chargé correctement.</p>
      <button (click)="dismiss()" style="background: white; color: #ff6b6b; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">
        Fermer
      </button>
    </div>
  </div>

  <!-- Contenu du formulaire -->
  <div style="flex: 1; overflow-y: auto; padding: 15px;" *ngIf="driverForm">
    <form [formGroup]="driverForm" (ngSubmit)="save()" style="max-width: 500px; margin: 0 auto;">
      
      <!-- Section Informations personnelles -->
      <div style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h3 style="margin: 0 0 15px 0; color: #2d3436; display: flex; align-items: center; gap: 8px; font-size: 16px;">
          <span style="color: #6c5ce7;">👤</span> Identité du livreur
        </h3>

        <!-- Prénom -->
        <div style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 6px; font-weight: 600; color: #2d3436; font-size: 14px;">
            Prénom <span style="color: #e17055;">*</span>
          </label>
          <input 
            type="text" 
            formControlName="first_name"
            placeholder="Ex: Jean"
            style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;"
            [style.border-color]="hasError('first_name') ? '#e17055' : '#ddd'"
            (focus)="$event.target.style.borderColor='#6c5ce7'"
            (blur)="$event.target.style.borderColor = hasError('first_name') ? '#e17055' : '#ddd'">
          <div *ngIf="hasError('first_name')" style="color: #e17055; font-size: 12px; margin-top: 4px;">
            {{getErrorMessage('first_name')}}
          </div>
        </div>

      </div>

      <!-- Section Contact -->
      <div style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h3 style="margin: 0 0 15px 0; color: #2d3436; display: flex; align-items: center; gap: 8px; font-size: 16px;">
          <span style="color: #6c5ce7;">📞</span> Contact
        </h3>

        <!-- Téléphone -->
        <div style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 6px; font-weight: 600; color: #2d3436; font-size: 14px;">
            Téléphone mobile <span style="color: #e17055;">*</span>
          </label>
          <input 
            type="tel" 
            formControlName="phone_number"
            placeholder="0612345678"
            maxlength="10"
            (input)="onPhoneInput($event)"
            style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;"
            [style.border-color]="hasError('phone_number') ? '#e17055' : '#ddd'"
            (focus)="$event.target.style.borderColor='#6c5ce7'"
            (blur)="$event.target.style.borderColor = hasError('phone_number') ? '#e17055' : '#ddd'">
          <div *ngIf="!hasError('phone_number') && driverForm.get('phone_number')?.value" style="color: #636e72; font-size: 12px; margin-top: 4px; font-style: italic;">
            {{formattedPhone}}
          </div>
          <div *ngIf="hasError('phone_number')" style="color: #e17055; font-size: 12px; margin-top: 4px;">
            {{getErrorMessage('phone_number')}}
          </div>
        </div>

      </div>

      <!-- Section Code d'accès -->
      <div style="background: linear-gradient(135deg, #e3f2fd, #f3e5f5); padding: 15px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <div style="display: flex; align-items: center; gap: 12px; padding: 10px; background: rgba(108, 92, 231, 0.1); border-radius: 8px; border-left: 4px solid #6c5ce7;">
          <span style="font-size: 20px;">🔐</span>
          <div style="flex: 1;">
            <p style="margin: 0; font-weight: 600; color: #2d3436; font-size: 14px;">Code généré automatiquement</p>
            <p style="margin: 0; font-size: 12px; color: #636e72;">Envoyé par WhatsApp</p>
          </div>
        </div>
      </div>


    </form>
  </div>

<!-- Boutons de pied de page - TOUJOURS VISIBLES -->
<div style="background: white; padding: 15px; border-top: 1px solid #ddd; flex-shrink: 0;">
  <div style="display: flex; gap: 12px; max-width: 500px; margin: 0 auto;">
    <button 
      type="button"
      (click)="dismiss()" 
      [disabled]="isLoading"
      style="flex: 1; padding: 12px; background: #636e72; color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer;"
      [style.opacity]="isLoading ? '0.6' : '1'">
      Annuler
    </button>
    <button 
      type="button"
      (click)="save()" 
      [disabled]="!driverForm.valid || isLoading"
      style="flex: 2; padding: 12px; background: #6c5ce7; color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; box-shadow: 0 4px 12px rgba(108, 92, 231, 0.3);"
      [style.opacity]="(!driverForm.valid || isLoading) ? '0.6' : '1'">
      <span *ngIf="isLoading">⏳ Création...</span>
      <span *ngIf="!isLoading">✅ Créer le livreur</span>
    </button>
  </div>
</div>

