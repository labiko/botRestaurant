<ion-content>
  <!-- Header avec logo moderne -->
  <div class="header-section">
    <div class="logo-container">
      <img src="assets/images/botlogo.png" alt="Bot Resto France" class="app-logo" />
    </div>
    <h1 class="app-title">
      <span class="french-flag">ðŸ‡«ðŸ‡·</span>
      Bot Resto France
    </h1>
    <p class="app-subtitle">SystÃ¨me de gestion des commandes et livraisons</p>
  </div>
  
  <!-- Profile Selection -->
  <div class="profile-selection" *ngIf="!showLoginForm">
    <h2>Choisissez votre profil</h2>
    
    <div class="profile-cards-container">
      <div class="profile-card" (click)="selectProfile('restaurant')">
        <ion-icon name="restaurant" class="profile-icon"></ion-icon>
        <h3>Restaurant</h3>
        <p>GÃ©rer les commandes et votre Ã©tablissement</p>
      </div>
      
      <div class="profile-card" (click)="selectProfile('driver')">
        <ion-icon name="bicycle" class="profile-icon"></ion-icon>
        <h3>Livreur</h3>
        <p>Effectuer les livraisons</p>
      </div>
    </div>
  </div>

  <!-- Login Form -->
  <div class="login-section" *ngIf="showLoginForm">
    <div class="login-header">
      <ion-button fill="clear" (click)="goBack()" class="back-button">
        <ion-icon name="arrow-back" slot="start"></ion-icon>
        Retour
      </ion-button>
      
      <h2 class="login-title">
        <ion-icon [name]="selectedProfileType === 'restaurant' ? 'restaurant' : 'bicycle'" class="login-icon"></ion-icon>
        Connexion {{ selectedProfileType === 'restaurant' ? 'Restaurant' : 'Livreur' }}
      </h2>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="login-form">
      <!-- SÃ©lecteur de pays pour livreur uniquement -->
      <div class="input-container" *ngIf="selectedProfileType === 'driver'">
        <ion-item class="modern-input" lines="none">
          <div class="input-content">
            <ion-label position="floating" class="modern-label">Pays</ion-label>
            <ion-select formControlName="country_code_selector" interface="popover">
              <ion-select-option *ngFor="let country of availableCountries" [value]="country.code">
                {{country.flag}} {{country.name}} (+{{country.code}})
              </ion-select-option>
            </ion-select>
          </div>
        </ion-item>
      </div>

      <!-- SÃ©lecteur de pays pour restaurant -->
      <div class="input-container" *ngIf="selectedProfileType === 'restaurant'">
        <ion-item class="modern-input" lines="none">
          <div class="input-content">
            <ion-label position="floating" class="modern-label">Pays</ion-label>
            <ion-select formControlName="country_code_selector" interface="popover">
              <ion-select-option *ngFor="let country of availableCountries" [value]="country.code">
                {{country.flag}} {{country.name}} (+{{country.code}})
              </ion-select-option>
            </ion-select>
          </div>
        </ion-item>
      </div>

      <div class="input-container">
        <ion-item class="modern-input phone-input" lines="none">
          <div class="input-prefix">
            <ion-icon name="call-outline" class="phone-icon"></ion-icon>
          </div>
          <div class="input-content">
            <ion-label position="floating" class="modern-label">NumÃ©ro local</ion-label>
            <ion-input
              formControlName="phone"
              type="tel"
              placeholder="06 12 34 56 78"
              clearInput="true"
              class="phone-number-input">
            </ion-input>
          </div>
        </ion-item>
      </div>

      <div class="input-container">
        <ion-item class="modern-input password-input" lines="none">
          <div class="input-prefix">
            <ion-icon name="lock-closed-outline" class="password-icon"></ion-icon>
          </div>
          <div class="input-content">
            <ion-label position="floating" class="modern-label">
              {{ selectedProfileType === 'restaurant' ? 'Mot de passe' : 'Code Ã  6 chiffres' }}
            </ion-label>
            <ion-input
              formControlName="password"
              [type]="showPassword ? 'text' : 'password'"
              [placeholder]="selectedProfileType === 'restaurant' ? 'Entrez votre mot de passe' : 'Entrez votre code'"
              [maxlength]="selectedProfileType === 'driver' ? 6 : null"
              clearInput="true"
              class="password-field">
            </ion-input>
          </div>
          <ion-button 
            fill="clear" 
            slot="end" 
            (click)="togglePassword()"
            class="password-toggle">
            <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
          </ion-button>
        </ion-item>
      </div>

      <div class="form-actions">
        <ion-button
          expand="block"
          type="submit"
          [disabled]="!loginForm.valid || isLoading"
          class="login-button">
          <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
          <span *ngIf="!isLoading">Se connecter</span>
        </ion-button>
      </div>

      <!-- Lien code oubliÃ© (livreurs uniquement) -->
      <div class="forgot-password-link" *ngIf="selectedProfileType === 'driver'" style="text-align: center; margin-top: 16px;">
        <ion-button fill="clear" size="small" (click)="onForgotPassword()">
          <ion-icon name="help-circle-outline" slot="start"></ion-icon>
          Code oubliÃ© ?
        </ion-button>
      </div>

      <!-- Message d'erreur -->
      <div class="error-message" *ngIf="errorMessage">
        <ion-icon name="alert-circle"></ion-icon>
        {{ errorMessage }}
      </div>
    </form>
  </div>

  <!-- Footer -->
  <div class="footer-section">
    <p>Version 2.10 | Â© 2024 Bot Resto France</p>

  </div>
</ion-content>