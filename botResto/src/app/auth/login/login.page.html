<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>
      <ion-icon [name]="userType === 'restaurant' ? 'restaurant' : 'bicycle'" class="title-icon"></ion-icon>
      Connexion {{ userType === 'restaurant' ? 'Restaurant' : 'Livreur' }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="login-content">
  <div class="login-container">
    
    <!-- Logo et titre -->
    <div class="login-header">
      <ion-icon [name]="userType === 'restaurant' ? 'restaurant' : 'bicycle'" class="profile-icon"></ion-icon>
      <h2>{{ userType === 'restaurant' ? 'Espace Restaurant' : 'Espace Livreur' }}</h2>
      <p>Connectez-vous pour accéder à votre tableau de bord</p>
    </div>

    <!-- Formulaire Restaurant -->
    <form *ngIf="userType === 'restaurant'" class="login-form">
      <ion-item class="modern-input">
        <ion-label position="stacked">Numéro de téléphone</ion-label>
        <ion-input 
          type="tel" 
          [(ngModel)]="restaurantPhone" 
          name="phone"
          placeholder="33620951645"
          class="phone-input"
          required>
        </ion-input>
        <ion-icon name="call-outline" slot="end" class="input-icon"></ion-icon>
      </ion-item>

      <ion-item class="modern-input">
        <ion-label position="stacked">Mot de passe</ion-label>
        <ion-input 
          type="password" 
          [(ngModel)]="restaurantPassword" 
          name="password"
          placeholder="••••••••••••"
          class="password-input"
          required>
        </ion-input>
        <ion-icon name="lock-closed-outline" slot="end" class="input-icon"></ion-icon>
      </ion-item>

      <ion-button 
        expand="block" 
        class="btn-primary login-button modern-button restaurant-button"
        (click)="loginRestaurant()"
        [disabled]="!restaurantPhone">
        <ion-icon name="restaurant-outline" slot="start"></ion-icon>
        Accéder au restaurant
      </ion-button>

    </form>

    <!-- Formulaire Livreur -->
    <form *ngIf="userType === 'delivery'" class="login-form">
      <div class="phone-input-container">
        <ion-item class="phone-item">
          <div class="country-prefix" slot="start">
            <div class="guinea-flag">
              <div class="flag-red"></div>
              <div class="flag-yellow"></div>
              <div class="flag-green"></div>
            </div>
            <span class="country-code">+224</span>
          </div>
          <ion-label position="stacked">Numéro de téléphone</ion-label>
          <ion-input 
            type="tel" 
            [(ngModel)]="deliveryPhone" 
            name="phone"
            placeholder="622 879 890"
            class="phone-input"
            required>
          </ion-input>
        </ion-item>
      </div>

      <ion-item class="modern-input">
        <ion-label position="stacked">Code d'accès</ion-label>
        <ion-input 
          type="text" 
          [(ngModel)]="deliveryCode" 
          name="code"
          placeholder="000000"
          maxlength="6"
          class="access-code-input"
          required>
        </ion-input>
        <ion-icon name="key-outline" slot="end" class="input-icon"></ion-icon>
      </ion-item>

      <ion-button 
        expand="block" 
        class="btn-secondary login-button modern-button"
        (click)="loginDelivery()"
        [disabled]="!deliveryPhone || !deliveryCode">
        <ion-icon name="log-in-outline" slot="start"></ion-icon>
        Se connecter
      </ion-button>
    </form>

    <!-- Options supplémentaires -->
    <div class="login-footer">
      <p *ngIf="userType === 'restaurant'">
        <a (click)="showRestaurantPasswordRecovery()" class="forgot-password-link">
          <ion-icon name="key-outline"></ion-icon>
          Mot de passe oublié ?
        </a>
      </p>
      <p *ngIf="userType === 'delivery'">
        <a (click)="showPasswordRecovery()" class="forgot-password-link">
          <ion-icon name="key-outline"></ion-icon>
          Code d'accès oublié ?
        </a>
      </p>
      <p>
        <a (click)="goBack()">Changer de profil</a>
      </p>
    </div>
    
  </div>
</ion-content>