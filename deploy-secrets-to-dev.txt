# ========================================
# DÉPLOIEMENT COMPLET DES SECRETS VERS DEV
# ========================================

# ÉTAPE 1: Basculer vers l'environnement DEV
supabase link --project-ref lphvdoyhwaelmwdfkfuh

# ÉTAPE 2: Configurer toutes les variables d'environnement (secrets PROD → DEV)

# Green API (même config pour DEV et PROD)
supabase secrets set GREEN_API_URL=https://7105.api.greenapi.com/waInstance7105313693
supabase secrets set GREEN_API_TOKEN=994e56511a43455693d2c4c1e4be86384a27eb921c394d5693
supabase secrets set GREEN_API_INSTANCE_ID=7105313693

# Google Places API (même clé pour DEV et PROD)
supabase secrets set GOOGLE_PLACES_API_KEY=AIzaSyD3UNSLl2evyWRiTVxR4xwkAiDIJ5nc4S0

# Variables personnalisées (à ajuster si nécessaire pour DEV)
supabase secrets set APP_ENV=dev
supabase secrets set CUSTOM_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxwaHZkb3lod2FlbG13ZGZrZnVoIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1ODIwMzkyNiwiZXhwIjoyMDczNzc5OTI2fQ.JhO4gqZ2qFc2DmLe-ssyWf3GGOiRVopxBVJtyI8DbkY

# ÉTAPE 3: Déployer le bot
supabase functions deploy bot-resto-france-universel

# ========================================
# VARIABLES AUTOMATIQUES (NE PAS DÉFINIR)
# ========================================
# Ces variables sont gérées automatiquement par Supabase lors du linking :
# - SUPABASE_URL (https://lphvdoyhwaelmwdfkfuh.supabase.co)
# - SUPABASE_SERVICE_ROLE_KEY (clé auto du projet DEV)
# - SUPABASE_ANON_KEY (clé auto du projet DEV)
# - SUPABASE_DB_URL (URL DB auto du projet DEV)
# - SERVICE_ROLE_KEY (copie de SUPABASE_SERVICE_ROLE_KEY)

# ========================================
# INFORMATIONS DE RÉFÉRENCE
# ========================================
# Projet DEV: lphvdoyhwaelmwdfkfuh (bot-whatsapp-resto-france-dev)
# Projet PROD: vywbhlnzvfqtiurwmrac (bot-whatsapp-resto-france)
#
# Green API identique pour DEV/PROD:
# - Instance: 7105313693
# - Token: 994e56511a43455693d2c4c1e4be86384a27eb921c394d5693
# - URL: https://7105.api.greenapi.com/waInstance7105313693