<!DOCTYPE html>
<html>
<head>
    <title>Test API Categories Direct</title>
</head>
<body>
    <h1>🧪 Test API Categories</h1>

    <button onclick="testCategoriesGET()">Test GET Categories</button>
    <button onclick="testCategoriesPUT()">Test PUT Categories</button>

    <div id="results" style="margin-top: 20px; padding: 10px; background: #f5f5f5;"></div>

    <script>
        const log = (message, data = null) => {
            const results = document.getElementById('results');
            const time = new Date().toLocaleTimeString();
            results.innerHTML += `<div><strong>${time}:</strong> ${message}</div>`;
            if (data) {
                results.innerHTML += `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            }
            results.innerHTML += '<hr>';
        };

        async function testCategoriesGET() {
            log('🔍 Test GET /api/categories');

            try {
                // Test avec restaurant_id=1
                const response = await fetch('/api/categories?restaurant_id=1');
                const data = await response.json();

                log(`✅ Status: ${response.status}`, data);
            } catch (error) {
                log(`❌ Erreur GET: ${error.message}`);
            }
        }

        async function testCategoriesPUT() {
            log('🔍 Test PUT /api/categories');

            try {
                const response = await fetch('/api/categories', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        id: 1,
                        icon: '🍽️'
                    })
                });

                const data = await response.json();
                log(`✅ Status: ${response.status}`, data);
            } catch (error) {
                log(`❌ Erreur PUT: ${error.message}`);
            }
        }
    </script>
</body>
</html>